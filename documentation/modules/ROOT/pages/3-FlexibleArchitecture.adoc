# ACCELERATE APPLICATION DEVELOPMENT LAB GUIDE
# Red Hat Summit 2023

## ABOUT THIS LAB
In this lab we'll address some ways that can help you with some major challenges we've witnessed with some of our largest customers:

* In order to meet your customer's needs, you need the ability to deliver new capabilities through secure software applications rapidly, and continuously.
* Many customers have applications that are architected and developed in such a way that they are not easily evolvable, agile enough to meet a rapid change in business reuirements, or even in a position to efficiently develop and maintain new applications, especially without reaching the same challenges again.
* IT organizations need to facilitate securely buildable and deployable applications at scale for their developers, wherever it makes sense for the business - whether on-premesis, in a cloud, or even in a hybrid combination. 

## LAB ASSETS
https://supporting.slides.link[Supporting Slides]

## INTRODUCTION
I think we can all agree that fast, secure, and continuous deployment of great software is the backbone to this generations most successful organizations. Without a great digital experience that is constantly improving, a company risks being quickly outpaced by competitors and ultimately, obsolescence.

Modern application development is an approach that enables your development team(s) to quickly respond to business needs and improve reaction to changes by rapidly updating applications and services. They are designed and packaged as microservices that are loosely coupled for easier maintenance with higher fault tolerances. Combining this with the power of a cloud-native environment, you can speed up your build and release cycles, with less operational overhead. 

People often hesitate out of intimidation of difficult technology adoptions. This demo shows the new way of application development that can change the way an organization works, increasing each technical team's agility, relieving them from the life of repeatedly putting out fires.

The lab presents a journey through the new cloud native application development, from code to production, from writing code and operating workload, to system design.

## LAB WALKTHROUGH
.Module Overview
|===
| https://link.to.module1.in.line[Enabling Immediate Productivity] |https://link.to.module2.in.line[Automating Guardrails] |https://link.to.module3.in.line[Building a Flexible Architecture]
|===

### Module Three: Building a Flexible Architecture
#### Lessons Learned:
How to develop applications using microservices and event driven architectures, all on one platform, which is easily deployable and consistently integrated across any cloud.

#### Instructions:

**API**

**FAULT TOLERANCE**

**STREAMING WITH KAFKA**

**EVENT-DRIVEN ARCHITECTURE**




## Congratulations on completing this lab! 
We hope this helped establish a foundational understanding that you can take home and build upon evolving your journey in application development.*

*Don't forget to review the listed training courses available through Red Hat Training and Certification.*

*Additionally, below youâ€™ll find a few Red Hat Portfolio Architectures that can be useful for understanding how some of our customers are using similar technologies/concepts to what we've reviewed today. These are customer deployed solutions that Red Hat has brought in-house, boiled down into an easily understandable, consumable, and shareable format to influence innovation for our customers and partners. These solutions are available at https://redhat.com/architect/portfolio[The Red Hat Portfolio Architecture Center].*

* https://www.redhat.com/architect/portfolio/detail/4[**Cloud Native Development**] : Cloud-native development is an approach to building and running applications to fully exploit the advantages of cloud computing.
* https://www.redhat.com/architect/portfolio/detail/8[**Hybrid Multi Cloud Management with GitOps**] : Unify continuous delivery as well as secured secret management across both hybrid and multi cloud environments.
* https://www.redhat.com/architect/portfolio/detail/27[**Event Driven Automation**] : Automating event response for configuration changes, security preparedness, or emergency incident handling across a scaling estate, whether on-premises in physical data centers or in public/private clouds.











-----------------------------------------------------------------------------------------------------------
OLD CONTENT
-----------------------------------------------------------------------------------------------------------









= 3. Integrate OpenShift GitOps - 20 minutes
:imagesdir: ../assets/images

== Goals of this lab

The goal is to build and deploy the modernized customer application to OpenShift using link:https://access.redhat.com/documentation/en-us/openshift_container_platform/4.11/html-single/cicd/index#about-redhat-openshift-gitops_understanding-openshift-gitops[OpenShift GitOps (ArgoCD)^].

* Update the configuration for the *gateway* service to now point to the modernized *customers* service.
* Demonstrate that your *frontend* service still works as before.

== 3.1. Sync the Gateway application in ArgoCD

=== 3.1.1 Why OpenShift GitOps?

`GitOps` in short is a set of practices to use *Git pull requests* to manage infrastructure and application configurations. A Git repository in GitOps is considered the only source of truth and contains the entire state of the system so that the trail of changes to the system state are visible and auditable.

Traceability of changes in GitOps is no novelty in itself as this approach is almost universally employed for the application source code. However GitOps advocates applying the same principles (`reviews`, `pull requests`, `tagging`, etc) to infrastructure and application configuration so that teams can benefit from the same assurance as they do for the application source code.

Although there is no precise definition or agreed upon set of rules, the following principles are an approximation of what constitutes a GitOps practice:

* Declarative description of the system is stored in Git (configs, monitoring, etc)
* Changes to the state are made via pull requests
* Git push reconciled with the state of the running system with the state in the Git repository

=== 3.1.2 Update the Gateway Configuration

Before you update the `Gateway` configuration, take a look at the current link:https://console-openshift-console.%SUBDOMAIN%/k8s/ns/retail-%USERID%/configmaps/gateway-config[application.yaml^] data of the `gateway-config` ConfigMap.

image::gateway-config.png[gateway-config]

Go back to the link:https://argocd-server-retail-%USERID%.%SUBDOMAIN%/applications/applications?view=tree&resource=&node=argoproj.io%2FApplication%2Fretail-%USERID%%2Fapplications%2F0&tab=parameters[APP DETAILS^] in the ArgoCD admin console. Click on `EDIT`.

image::gateway-config-argo.png[gateway-config-argo]

Replace `customersHost` with the following value.

[.console-input]
[source,yaml]
----
customersHost: customers
----

Then, close the popup window by clicking `X` on the right top.

Now you will see the `OutOfSync` status of the `gateway` application because you just only updated the ArgoCD's application parameter that is different than link:https://console-openshift-console.%SUBDOMAIN%/k8s/ns/retail-%USERID%/configmaps/gateway-config[gateway-config ConfigMap^] in the retail-%USERID% project.

image::argocd-gateway-outofsync.png[argocd-gateway-outofsync]

Click on `SYNC`. Then, click on `SYNCHRONIZE` on the left popup window.

image::argocd-gateway-sync.png[argocd-gateway-sync]

The application should be synced in a second.

image::argocd-gateway-synced.png[argocd-gateway-synced]

Go back to the OpenShift admin console to confirm if the `gateway-config` is updated based on the code change.

image::gateway-new-configmap.png[gateway-new-configmap]

== 3.2. Revisit the GLOBEX web page

Let's go back to the `Customers` in the link:https://ordersfrontend-retail-%USERID%.%SUBDOMAIN%[GLOBEX web page^].

image::frontend.png[Frontend]

[NOTE]
====
You might see `Unknown` result for customers data since the customers application can't access the database on OpenShift Virtualization with an error - `java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist`. In that case, restart the `customers pod` by deleting the pod in OpenShift admin console.
====

== Summary

You have now successfully deployed the new *customers* application by integrating OpenShift Pipeline and GitOps for the continuous delivery automation. You'll learn Learn how to extend an application using API management and implement an event driven architecture in `module 4 and 5`.

== Additional Resources

* https://www.redhat.com/en/topics/application-modernization[Understanding application modernization^]
* https://www.redhat.com/en/topics/devops/what-cicd-pipeline[Cloud-native CI/CD on OpenShift^]
* https://www.redhat.com/en/resources/java-app-modernization-with-openshift-e-book[eBook - Plan your Java application modernization journey^]
* https://kubebyexample.com/en/learning-paths/migrating-kubernetes/assess-and-refactor-tackle[Migrating Kubernetes Learning Path^]
